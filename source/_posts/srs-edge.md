---
title: 初探srs流媒体-edge边缘服务器
date: 2018-8-31 
categories: 
- srs
tags:
- srs
---

# SRS 边缘(edge)
> * 所谓边缘edge服务器，就是边缘直播缓存服务器，配置时指定为remote模式和origin
> *（指定一个或多个源站IP），这个边缘edge服务器就是源站的缓存了

>*  当用户播放边缘服务器的流时，边缘服务器看有没有缓存，若缓存了就直接将流发给客户端。
 若没有缓存，则发起一路回源链接，从源站取数据源源不断放到自己的缓存队列。
 也就是说， 多个客户端连接到边缘时，只有一路回源。这种结构在CDN是最典型的部署结构。
 譬如北京源站， 在全国32个省每个省都部署了10台服务器，一共就有320台边缘，假设每个省1台边缘服务器都有 2000用户观看，那么就有64万用户，每秒钟集群发送640Gbps数据；而回源链接只有320个， 实现了大规模分发。
 
> * 边缘edge服务器，实际上是解决大并发问题产生的分布式集群结构。SRS的边缘可以指定多个源站， 在源站出现故障时会自动切换到下一个源站，不影响用户观看，具有最佳的容错性，用户完全不会觉察。
> * 总结:使用edge的好处可以承受更大并发也很容易就能搭建一个srs集群 提高了srs容错.即使srs出了问题在切换源的途中用户也不会察觉
> * 工作模式: 假如我现在有 ``47.104.10.92:9524`` , ``127.0.0.1:5685`` 两台rtmp集群 用户推流只能向一台srs服务器推流
如果用户A 在 ``47.104.10.92:9524`` rmtp推流成功,那其他用户也只能通过 ``47.104.10.92:9524`` 获取视频流
如果使用上 edge 不管 视频流在 ``47.104.10.92:9524``,``127.0.0.1:5685`` 那台srs服务器上edge 会遍历 srs服务器 查询到源站视频流的节点然后建立连接,这样就做了一个很好的中转
 
>* 文档 [edge](https://github.com/ossrs/srs/wiki/v1_CN_Edge)
   
 > * 注意：优先使用edge，除非知道必须用forward，才使用forward。(forward热备:就是拷贝流到其他srs并不能实现主从)  

